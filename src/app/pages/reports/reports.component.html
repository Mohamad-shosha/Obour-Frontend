<!-- src/app/pages/reports/reports.component.html -->
<div class="py-5 bg-light min-vh-100">
  <div class="container">
    <!-- العنوان -->
    <div class="mb-5 animate-slide-up">
      <h1 class="display-5 fw-bold text-dark mb-2">التقارير والتحليلات</h1>
      <p class="text-muted fs-5">رؤى تفصيلية وتحليلات شاملة للأداء</p>
    </div>

    <!-- بطاقات الإحصائيات العلوية -->
    <div class="row g-4 mb-5">
      <div class="col-12 col-md-4 animate-slide-up">
        <div
          class="bg-gradient-to-br from-primary to-primary-dark rounded-3 p-4 text-white card-shadow card-hover h-100"
        >
          <div class="d-flex align-items-center justify-content-between mb-3">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              width="32"
              height="32"
            >
              <path
                d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z M23 21v-2a4 4 0 0 0-3-3.87 M16 3.13a4 4 0 0 1 0 7.75"
              ></path>
            </svg>
            <span class="display-6 fw-bold">45+</span>
          </div>
          <h3 class="h6 fw-bold mb-1">الجامعات</h3>
          <p class="text-white-75 small">المشاركة في البرنامج</p>
        </div>
      </div>

      <div class="col-12 col-md-4 animate-slide-up">
        <div
          class="bg-gradient-to-br from-success to-success-dark rounded-3 p-4 text-white card-shadow card-hover h-100"
        >
          <div class="d-flex align-items-center justify-content-between mb-3">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              width="32"
              height="32"
            >
              <path
                d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z M23 21v-2a4 4 0 0 0-3-3.87 M16 3.13a4 4 0 0 1 0 7.75"
              ></path>
            </svg>
            <span class="display-6 fw-bold">25k+</span>
          </div>
          <h3 class="h6 fw-bold mb-1">الطلبة</h3>
          <p class="text-white-75 small">المستفيدين من التقييم</p>
        </div>
      </div>

      <div class="col-12 col-md-4 animate-slide-up">
        <div
          class="bg-gradient-to-br from-purple to-purple-dark rounded-3 p-4 text-white card-shadow card-hover h-100"
        >
          <div class="d-flex align-items-center justify-content-between mb-3">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              width="32"
              height="32"
            >
              <path
                d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zm18 0h-6a4 4 0 0 0-4 4v14a3 3 0 0 0 3-3h7z"
              ></path>
            </svg>
            <span class="display-6 fw-bold">120+</span>
          </div>
          <h3 class="h6 fw-bold mb-1">التخصصات</h3>
          <p class="text-white-75 small">الأكاديمية المغطاة</p>
        </div>
      </div>
    </div>

    <!-- الجداول الجانبية -->
    <div class="row g-4 mb-5">
      <!-- أداء الجامعات -->
      <div class="col-12 col-lg-6 animate-slide-up">
        <app-chart-card
          title="أداء الجامعات"
          iconPath="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2 M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z M23 21v-2a4 4 0 0 0-3-3.87 M16 3.13a4 4 0 0 1 0 7.75"
        >
          <div class="d-flex justify-content-between mb-3">
            <button class="btn btn-sm text-primary p-0">عرض الكل</button>
          </div>
          <div class="space-y-3">
            <div
              *ngFor="let uni of universities"
              class="d-flex align-items-center justify-content-between p-3 bg-light rounded-3 hover-bg"
            >
              <div class="flex-grow-1">
                <h4 class="h6 fw-bold text-dark mb-1">{{ uni.name }}</h4>
                <p class="small text-muted mb-0">{{ uni.students }} طالب</p>
              </div>
              <div class="text-end">
                <div class="d-flex align-items-center gap-2 mb-1">
                  <span class="h5 fw-bold text-dark mb-0">{{ uni.avg }}%</span>
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    width="16"
                    height="16"
                    class="text-success"
                  >
                    <path d="M2 12h20M12 2v20"></path>
                  </svg>
                </div>
                <span class="tiny text-success fw-medium">{{ uni.trend }}</span>
              </div>
            </div>
          </div>
        </app-chart-card>
      </div>

      <!-- الجاهزية حسب التخصص -->
      <div class="col-12 col-lg-6 animate-slide-up">
        <app-chart-card
          title="الجاهزية حسب التخصص"
          iconPath="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zm18 0h-6a4 4 0 0 0-4 4v14a3 3 0 0 0 3-3h7z"
        >
          <div class="d-flex justify-content-between mb-3">
            <button class="btn btn-sm text-success p-0">عرض الكل</button>
          </div>
          <div class="space-y-3">
            <div *ngFor="let spec of specializations">
              <div
                class="d-flex align-items-center justify-content-between mb-2"
              >
                <div class="d-flex align-items-center gap-2">
                  <div
                    class="rounded-circle"
                    [ngClass]="spec.color"
                    style="width: 10px; height: 10px"
                  ></div>
                  <span class="small fw-medium text-dark">{{ spec.name }}</span>
                </div>
                <div class="text-end">
                  <span class="fw-bold text-dark">{{ spec.readiness }}%</span>
                  <span class="tiny text-muted ms-1">({{ spec.count }})</span>
                </div>
              </div>
              <app-progress-bar
                [percentage]="spec.readiness"
                [color]="spec.color"
              ></app-progress-bar>
            </div>
          </div>
        </app-chart-card>
      </div>
    </div>

    <!-- قائمة التقارير -->
    <div class="mb-5 animate-slide-up">
      <app-chart-card
        title="التقارير المتاحة"
        iconPath="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"
      >
        <div
          class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 mb-4"
        >
          <p class="text-muted mb-0">اختر التقارير التي تريد عرضها</p>
          <div class="d-flex align-items-center gap-3">
            <select
              class="form-select form-select-sm rounded-2 border border-secondary"
              (change)="onFilterChange($event)"
              style="min-width: 180px"
            >
              <option value="all">جميع التقارير</option>
              <option value="monthly">التقارير الشهرية</option>
              <option value="quarterly">التقارير ربع السنوية</option>
              <option value="analytical">التقارير التحليلية</option>
            </select>
            <button class="btn btn-sm btn-primary rounded-2 px-3">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                width="16"
                height="16"
                class="me-1"
              >
                <path d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
              تطبيق
            </button>
          </div>
        </div>

        <div class="space-y-3">
          <div
            *ngFor="let report of reports"
            class="d-flex align-items-center justify-content-between p-4 bg-white rounded-3 card-shadow card-hover transition-all"
          >
            <div class="d-flex align-items-center gap-4">
              <div
                class="rounded-3 gradient-primary d-flex align-items-center justify-content-center flex-shrink-0"
                style="width: 56px; height: 56px"
              >
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  width="28"
                  height="28"
                  class="text-white"
                >
                  <path
                    d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"
                  ></path>
                </svg>
              </div>
              <div>
                <h4 class="h6 fw-bold text-dark mb-2">{{ report.title }}</h4>
                <div
                  class="d-flex flex-wrap align-items-center gap-3 text-muted tiny"
                >
                  <span class="d-flex align-items-center gap-1">
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      width="14"
                      height="14"
                    >
                      <rect
                        x="3"
                        y="4"
                        width="18"
                        height="18"
                        rx="2"
                        ry="2"
                      ></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    {{ report.date }}
                  </span>
                  <span class="d-flex align-items-center gap-1">
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      width="14"
                      height="14"
                    >
                      <path
                        d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"
                      ></path>
                    </svg>
                    <span
                      class="px-2 py-1 bg-primary bg-opacity-10 text-primary rounded-2 fw-medium"
                    >
                      {{ report.type }}
                    </span>
                  </span>
                  <span class="d-flex align-items-center gap-1">
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      width="14"
                      height="14"
                    >
                      <path
                        d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                      ></path>
                      <polyline points="14 2 14 8 20 8"></polyline>
                      <line x1="16" y1="13" x2="8" y2="13"></line>
                      <line x1="16" y1="17" x2="8" y2="17"></line>
                      <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    {{ report.size }}
                  </span>
                </div>
              </div>
            </div>
            <button
              class="btn btn-primary btn-sm fw-bold rounded-2 px-4 py-2 d-flex align-items-center gap-2"
            >
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                width="16"
                height="16"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              تحميل
            </button>
          </div>
        </div>
      </app-chart-card>
    </div>

    <!-- دعوة للعمل النهائية -->
    <div class="bg-dark-subtle rounded-3 p-4 p-md-5 card-shadow">
      <div
        class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-4"
      >
        <div>
          <h3 class="h5 fw-bold text-dark mb-2">هل تحتاج تقرير مخصص؟</h3>
          <p class="text-muted">يمكنك طلب تقرير مخصص حسب احتياجاتك</p>
        </div>
        <button class="btn btn-primary fw-bold px-4 py-2 rounded-3 shadow">
          طلب تقرير مخصص
        </button>
      </div>
    </div>
  </div>
</div>
