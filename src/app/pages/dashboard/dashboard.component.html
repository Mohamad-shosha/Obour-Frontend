<!-- src/app/pages/dashboard/dashboard.component.html -->
<div class="py-5 bg-light min-vh-100">
  <div class="container">
    <!-- العنوان -->
    <div class="mb-5">
      <h1 class="display-5 fw-bold text-dark mb-2">لوحة المعلومات</h1>
      <p class="text-muted fs-5">نظرة شاملة على الأداء والتقدم</p>
    </div>

    <!-- بطاقات الإحصائيات -->
    <div class="row g-4 mb-5">
      <div
        class="col-12 col-md-6 col-lg-3 animate-slide-up"
        *ngFor="let stat of stats; let i = index"
        [attr.style]="'animation-delay: ' + i * 0.1 + 's'"
      >
        <app-stat-card
          [title]="stat.title"
          [value]="stat.value"
          [iconPath]="stat.iconPath"
          [color]="stat.color"
          [description]="stat.description"
        >
        </app-stat-card>
      </div>
    </div>

    <!-- الأقسام الجانبية -->
    <div class="row g-4 mb-5">
      <!-- تطور الأداء الشهري -->
      <div class="col-12 col-lg-6 animate-slide-up">
        <app-chart-card title="تطور الأداء الشهري" iconPath="M2 12h20M12 2v20">
          <div class="space-y-3">
            <div
              *ngFor="let item of performanceData; let i = index"
              class="mb-3"
            >
              <!-- استخدام مكون app-progress-bar بدلاً من الكود اليدوي -->
              <app-progress-bar
                [label]="item.month"
                [percentage]="item.value"
                [color]="getValueColorClass(item.value)"
              >
              </app-progress-bar>
            </div>
          </div>
        </app-chart-card>
      </div>

      <!-- التوزيع حسب المحاور -->
      <div class="col-12 col-lg-6 animate-slide-up">
        <app-chart-card
          title="التوزيع حسب المحاور"
          iconPath="M12 5v10M8 9l4-4 4 4M3 12h18M12 19V5"
        >
          <div class="row text-center g-4">
            <div class="col-4" *ngFor="let axis of axesData">
              <app-progress-circle
                [percentage]="axis.percentage"
                [size]="100"
                [strokeWidth]="8"
                [color]="axis.color"
              >
              </app-progress-circle>
              <p class="small fw-bold text-dark mt-2">{{ axis.title }}</p>
              <p class="tiny text-muted">
                {{
                  axis.percentage >= 80
                    ? "ممتاز"
                    : axis.percentage >= 70
                    ? "جيد جداً"
                    : "جيد"
                }}
              </p>
            </div>
          </div>
        </app-chart-card>
      </div>
    </div>

    <!-- المهارات الأساسية وآخر الإنجازات -->
    <div class="row g-4 mb-5">
      <div class="col-12 col-lg-8">
        <app-chart-card
          title="المهارات الأساسية"
          iconPath="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zm18 0h-6a4 4 0 0 0-4 4v14a3 3 0 0 0 3-3h7z"
        >
          <div class="space-y-3">
            <app-progress-bar
              *ngFor="let skill of skills"
              [label]="skill.label"
              [percentage]="skill.percentage"
              [color]="skill.color"
            >
            </app-progress-bar>
          </div>
        </app-chart-card>
      </div>

      <div class="col-12 col-lg-4">
        <app-chart-card title="آخر الإنجازات" iconPath="M12 5l7 7-7 7M5 12h14">
          <div class="space-y-3">
            <div
              class="d-flex align-items-start gap-3 p-3 bg-light rounded-3"
              *ngFor="let achievement of achievements"
            >
              <div
                class="rounded-2 bg-{{
                  achievement.color
                }} d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px"
              >
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  width="20"
                  height="20"
                  class="text-white"
                >
                  <path [attr.d]="achievement.iconPath"></path>
                </svg>
              </div>
              <div>
                <p class="small fw-bold text-dark mb-1">
                  {{ achievement.title }}
                </p>
                <p class="tiny text-muted mb-0">
                  {{ achievement.description }}
                </p>
              </div>
            </div>
          </div>
        </app-chart-card>
      </div>
    </div>

    <!-- دعوة للعمل النهائية -->
    <div
      class="bg-gradient-to-br from-primary to-secondary rounded-3 p-4 p-md-5 text-white card-shadow"
    >
      <div
        class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-4"
      >
        <div>
          <h3 class="h5 fw-bold mb-2">جاهز للخطوة التالية؟</h3>
          <p class="text-white-75">
            ابدأ رحلتك التدريبية الآن واستفد من التوصيات الذكية
          </p>
        </div>
        <button
          class="btn btn-light text-primary fw-bold px-4 py-2 rounded-3 shadow"
        >
          عرض فرص التدريب
        </button>
      </div>
    </div>
  </div>
</div>
